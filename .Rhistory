model_clean <- lm(
# Execute: petitioner_vote ~ pitch_diff * pr_petitioner_pos + sgpetac + court_period,
petitioner_vote ~ pitch_diff * pr_petitioner_pos + sgpetac + court_period,
# Execute: data = clean_data
data = clean_data
# Close function call arguments.
)
# Export full-vs-clean comparison table (Table 3).
# Export regression table using stargazer.
stargazer(model_full, model_clean, type = "text", out = "HW3 Table3.txt")
# Save concise diagnostics summary values for narrative support.
# Assign computed result to outlier_summary.
outlier_summary <- c(
# Execute: "Outlier Summary (Section 3.4)",
"Outlier Summary (Section 3.4)",
# Execute: paste("Model observations:", n_model),
paste("Model observations:", n_model),
# Execute: paste("k (predictors):", k_model),
paste("k (predictors):", k_model),
# Execute: paste("Threshold |studentized residual| >", thr_resid),
paste("Threshold |studentized residual| >", thr_resid),
# Execute: paste("Threshold leverage >", round(thr_lev, 6)),
paste("Threshold leverage >", round(thr_lev, 6)),
# Execute: paste("Threshold Cook's D >", round(thr_cook, 6)),
paste("Threshold Cook's D >", round(thr_cook, 6)),
# Execute: paste("Threshold |DFFITS| >", round(thr_dffits, 6)),
paste("Threshold |DFFITS| >", round(thr_dffits, 6)),
# Execute: paste("Flagged outliers (any threshold):", sum(outlier_df$is_outlier)),
paste("Flagged outliers (any threshold):", sum(outlier_df$is_outlier)),
# Execute: paste("Flagged egregious outliers (all thresholds):", sum(outlier_df$is_egregious))
paste("Flagged egregious outliers (all thresholds):", sum(outlier_df$is_egregious))
# Close function call arguments.
)
# Write text output to file.
writeLines(outlier_summary, "HW3_OutlierSummary.txt")
# ---------------------------
# 6) Draft Answers for Q5-Q17
# ---------------------------
# Format numeric outputs consistently for text answers.
# Assign computed result to fmt_num.
fmt_num <- function(x, digits = 3) {
# Execute: formatC(x, format = "f", digits = digits)
formatC(x, format = "f", digits = digits)
# Close current code block.
}
# Q5
# Build Q5 narrative from computed distribution statistics.
# Assign computed result to q5_text.
q5_text <- paste0(
# Execute: "petitioner_vote is binary and fairly balanced but slightly petitioner-leaning: mean = ",
"petitioner_vote is binary and fairly balanced but slightly petitioner-leaning: mean = ",
# Execute: fmt_num(mean(justice_data$petitioner_vote, na.rm = TRUE), 3),
fmt_num(mean(justice_data$petitioner_vote, na.rm = TRUE), 3),
# Execute: ", median = ", fmt_num(median(justice_data$petitioner_vote, na.rm = TRUE), 0), ". ",
", median = ", fmt_num(median(justice_data$petitioner_vote, na.rm = TRUE), 0), ". ",
# Execute: "pitch_diff is centered near zero (mean = ", fmt_num(mean(justice_data$pitch_diff, na.rm = TRUE), 3),
"pitch_diff is centered near zero (mean = ", fmt_num(mean(justice_data$pitch_diff, na.rm = TRUE), 3),
# Execute: ", median = ", fmt_num(median(justice_data$pitch_diff, na.rm = TRUE), 3),
", median = ", fmt_num(median(justice_data$pitch_diff, na.rm = TRUE), 3),
# Execute: ") but has an extreme lower-tail outlier (min = ", fmt_num(min(justice_data$pitch_diff, na.rm = TRUE), 3),
") but has an extreme lower-tail outlier (min = ", fmt_num(min(justice_data$pitch_diff, na.rm = TRUE), 3),
# Execute: ", max = ", fmt_num(max(justice_data$pitch_diff, na.rm = TRUE), 3), "). ",
", max = ", fmt_num(max(justice_data$pitch_diff, na.rm = TRUE), 3), "). ",
# Execute: "petitioner_harvard_pos is right-skewed (mean = ",
"petitioner_harvard_pos is right-skewed (mean = ",
# Execute: fmt_num(mean(justice_data$petitioner_harvard_pos, na.rm = TRUE), 3),
fmt_num(mean(justice_data$petitioner_harvard_pos, na.rm = TRUE), 3),
# Execute: ", median = ", fmt_num(median(justice_data$petitioner_harvard_pos, na.rm = TRUE), 0),
", median = ", fmt_num(median(justice_data$petitioner_harvard_pos, na.rm = TRUE), 0),
# Execute: ", max = ", fmt_num(max(justice_data$petitioner_harvard_pos, na.rm = TRUE), 0), "). ",
", max = ", fmt_num(max(justice_data$petitioner_harvard_pos, na.rm = TRUE), 0), "). ",
# Execute: "There are ", sum(is.na(justice_data$petitioner_harvard_pos)),
"There are ", sum(is.na(justice_data$petitioner_harvard_pos)),
# Execute: " missing values in petitioner_harvard_pos and related text variables, so complete-case models drop observat...
" missing values in petitioner_harvard_pos and related text variables, so complete-case models drop observations."
# Close function call arguments.
)
# Q6/Q7
# Build Q6 narrative on variable construction and interpretation caveats.
# Assign computed result to q6_text.
q6_text <- paste(
# Execute: "pitch_diff is measured as petitioner_pitch minus respondent_pitch and captures whether a justice spoke at h...
"pitch_diff is measured as petitioner_pitch minus respondent_pitch and captures whether a justice spoke at higher or lower pitch to one side relative to the other.",
# Execute: "Supplemental documentation indicates the pitch measure is standardized before differencing, which helps com...
"Supplemental documentation indicates the pitch measure is standardized before differencing, which helps comparability across speakers (e.g., men vs. women with different baseline pitch ranges) and reduces sensitivity to absolute-frequency measurement noise.",
# Execute: "petitioner_harvard_pos is constructed by counting words directed to the petitioner that match a predefined ...
"petitioner_harvard_pos is constructed by counting words directed to the petitioner that match a predefined Harvard-IV positive-word dictionary.",
# Execute: "A challenge is that dictionary methods ignore context: sarcasm, negation, legal jargon, and polysemy can ca...
"A challenge is that dictionary methods ignore context: sarcasm, negation, legal jargon, and polysemy can cause words to be counted as 'positive' even when tone is neutral or negative."
# Close function call arguments.
)
# Build Q7 narrative on dictionary-based measurement error risks.
# Assign computed result to q7_text.
q7_text <- paste(
# Execute: "Dictionary-based coding can introduce false positives (words marked positive in neutral/legal context), fal...
"Dictionary-based coding can introduce false positives (words marked positive in neutral/legal context), false negatives (missed positive phrasing not in the dictionary), and context errors (negation, irony, sarcasm).",
# Execute: "These measurement errors generally add noise and can attenuate coefficients toward zero, but if misclassifi...
"These measurement errors generally add noise and can attenuate coefficients toward zero, but if misclassification is systematic by justice, issue area, or period, it can also bias effect estimates and distort substantive interpretation."
# Close function call arguments.
)
# Q8
# Split Figure 1 summaries into no-amicus vs amicus columns for delta reporting.
# Assign computed result to fig1_no.
fig1_no <- fig1_summary %>%
# Execute: dplyr::filter(sgpetac_label == "No Amicus") %>%
dplyr::filter(sgpetac_label == "No Amicus") %>%
# Execute: dplyr::select(justiceName, prop_no = prop_petitioner_vote)
dplyr::select(justiceName, prop_no = prop_petitioner_vote)
# Assign computed result to fig1_yes.
fig1_yes <- fig1_summary %>%
# Execute: dplyr::filter(sgpetac_label == "Amicus") %>%
dplyr::filter(sgpetac_label == "Amicus") %>%
# Execute: dplyr::select(justiceName, prop_yes = prop_petitioner_vote)
dplyr::select(justiceName, prop_yes = prop_petitioner_vote)
# Join and compute within-justice change in petitioner-vote share.
# Assign computed result to fig1_change.
fig1_change <- dplyr::left_join(fig1_no, fig1_yes, by = "justiceName") %>%
# Execute: dplyr::mutate(delta = prop_yes - prop_no) %>%
dplyr::mutate(delta = prop_yes - prop_no) %>%
# Execute: dplyr::arrange(justiceName)
dplyr::arrange(justiceName)
# Convert Figure 1 change table to a compact sentence fragment.
# Assign computed result to q8_detail.
q8_detail <- paste(
# Execute: paste0(
paste0(
# Execute: fig1_change$justiceName, ": ",
fig1_change$justiceName, ": ",
# Execute: fmt_num(fig1_change$prop_no, 3), " (No Amicus) -> ",
fmt_num(fig1_change$prop_no, 3), " (No Amicus) -> ",
# Execute: fmt_num(fig1_change$prop_yes, 3), " (Amicus), delta = ",
fmt_num(fig1_change$prop_yes, 3), " (Amicus), delta = ",
# Execute: fmt_num(fig1_change$delta, 3)
fmt_num(fig1_change$delta, 3)
# Close function call arguments.
),
# Execute: collapse = "; "
collapse = "; "
# Close function call arguments.
)
# Build Q8 narrative from justice-level amicus differences.
# Assign computed result to q8_text.
q8_text <- paste(
# Execute: "Across all three chief justices, petitioner-win rates are higher when the Solicitor General supports the pe...
"Across all three chief justices, petitioner-win rates are higher when the Solicitor General supports the petitioner.",
# Execute: q8_detail,
q8_detail,
# Execute: "A plausible interpretation is that SG support signals legal merit and institutional credibility, but the pa...
"A plausible interpretation is that SG support signals legal merit and institutional credibility, but the pattern may also reflect case selection and omitted confounders."
# Close function call arguments.
)
# Q9
# Split Figure 2 summaries into below-vs-above pitch groups.
# Assign computed result to fig2_below.
fig2_below <- fig2_summary %>%
# Execute: dplyr::filter(high_pitch_diff == "Below Avg. Pitch Differential") %>%
dplyr::filter(high_pitch_diff == "Below Avg. Pitch Differential") %>%
# Execute: dplyr::select(court_period, prop_below = prop_petitioner_vote)
dplyr::select(court_period, prop_below = prop_petitioner_vote)
# Assign computed result to fig2_above.
fig2_above <- fig2_summary %>%
# Execute: dplyr::filter(high_pitch_diff == "Above Avg. Pitch Differential") %>%
dplyr::filter(high_pitch_diff == "Above Avg. Pitch Differential") %>%
# Execute: dplyr::select(court_period, prop_above = prop_petitioner_vote)
dplyr::select(court_period, prop_above = prop_petitioner_vote)
# Join and compute period-specific differences.
# Assign computed result to fig2_change.
fig2_change <- dplyr::left_join(fig2_below, fig2_above, by = "court_period") %>%
# Execute: dplyr::mutate(delta_above_minus_below = prop_above - prop_below) %>%
dplyr::mutate(delta_above_minus_below = prop_above - prop_below) %>%
# Execute: dplyr::arrange(court_period)
dplyr::arrange(court_period)
# Convert Figure 2 period deltas to narrative-ready text.
# Assign computed result to q9_detail.
q9_detail <- paste(
# Execute: paste0(
paste0(
# Execute: fig2_change$court_period, ": Above = ", fmt_num(fig2_change$prop_above, 3),
fig2_change$court_period, ": Above = ", fmt_num(fig2_change$prop_above, 3),
# Execute: ", Below = ", fmt_num(fig2_change$prop_below, 3),
", Below = ", fmt_num(fig2_change$prop_below, 3),
# Execute: ", delta(Above-Below) = ", fmt_num(fig2_change$delta_above_minus_below, 3)
", delta(Above-Below) = ", fmt_num(fig2_change$delta_above_minus_below, 3)
# Close function call arguments.
),
# Execute: collapse = "; "
collapse = "; "
# Close function call arguments.
)
# Build Q9 narrative from period-level pitch-group contrasts.
# Assign computed result to q9_text.
q9_text <- paste(
# Execute: "Higher pitch-difference observations are generally associated with lower petitioner-win rates in Rehnquist ...
"Higher pitch-difference observations are generally associated with lower petitioner-win rates in Rehnquist and Roberts periods, while the Burger period shows little difference.",
# Execute: q9_detail,
q9_detail,
# Execute: "This suggests the pitch-vote relationship is not constant over time and appears stronger in later court per...
"This suggests the pitch-vote relationship is not constant over time and appears stronger in later court periods."
# Close function call arguments.
)
# Q10/Q11/Q12/Q13/Q14
# Pull model summaries and key statistics used in Q10-Q14 text.
# Assign computed result to m3_1_coef.
m3_1_coef <- coef(summary(m3_1))
# Assign computed result to m3_2_coef.
m3_2_coef <- coef(summary(m3_2))
# Assign computed result to m3_3_coef.
m3_3_coef <- coef(summary(m3_3))
# Assign computed result to pitch_b.
pitch_b <- m3_1_coef["pitch_diff", "Estimate"]
# Assign computed result to pitch_p.
pitch_p <- m3_1_coef["pitch_diff", "Pr(>|t|)"]
# Assign computed result to pr_b.
pr_b <- m3_1_coef["pr_petitioner_pos", "Estimate"]
# Assign computed result to pr_p.
pr_p <- m3_1_coef["pr_petitioner_pos", "Pr(>|t|)"]
# Assign computed result to adj_m3_1.
adj_m3_1 <- summary(m3_1)$adj.r.squared
# Assign computed result to adj_m3_2.
adj_m3_2 <- summary(m3_2)$adj.r.squared
# Assign computed result to adj_m3_3.
adj_m3_3 <- summary(m3_3)$adj.r.squared
# Assign computed result to justice_sig_n.
justice_sig_n <- sum(
# Execute: grepl("^factor\\(justiceName\\)", rownames(m3_2_coef)) &
grepl("^factor\\(justiceName\\)", rownames(m3_2_coef)) &
# Execute: m3_2_coef[, "Pr(>|t|)"] < 0.05
m3_2_coef[, "Pr(>|t|)"] < 0.05
# Close function call arguments.
)
# Assign computed result to term_sig_n.
term_sig_n <- sum(
# Execute: grepl("^factor\\(term\\)", rownames(m3_3_coef)) &
grepl("^factor\\(term\\)", rownames(m3_3_coef)) &
# Execute: m3_3_coef[, "Pr(>|t|)"] < 0.05
m3_3_coef[, "Pr(>|t|)"] < 0.05
# Close function call arguments.
)
# Build Q10 narrative on baseline predictors.
# Assign computed result to q10_text.
q10_text <- paste0(
# Execute: "In the baseline model (m3_1), pitch_diff is negative and statistically significant (b = ",
"In the baseline model (m3_1), pitch_diff is negative and statistically significant (b = ",
# Execute: fmt_num(pitch_b, 3), ", p = ", signif(pitch_p, 3),
fmt_num(pitch_b, 3), ", p = ", signif(pitch_p, 3),
# Execute: "), implying higher petitioner-vs-respondent pitch is associated with a lower probability of a petitioner vo...
"), implying higher petitioner-vs-respondent pitch is associated with a lower probability of a petitioner vote. ",
# Execute: "pr_petitioner_pos is not statistically significant (b = ", fmt_num(pr_b, 3),
"pr_petitioner_pos is not statistically significant (b = ", fmt_num(pr_b, 3),
# Execute: ", p = ", signif(pr_p, 3), "), so lexical positivity differences do not show a clear linear association in t...
", p = ", signif(pr_p, 3), "), so lexical positivity differences do not show a clear linear association in this specification."
# Close function call arguments.
)
# Build Q11 narrative on the effect of justice fixed effects.
# Assign computed result to q11_text.
q11_text <- paste0(
# Execute: "Controlling for justice fixed effects is important because justices have persistent baseline voting tendenc...
"Controlling for justice fixed effects is important because justices have persistent baseline voting tendencies that can confound speech-effect estimates. ",
# Execute: "After adding justice controls, adjusted R2 rises from ", fmt_num(adj_m3_1, 3),
"After adding justice controls, adjusted R2 rises from ", fmt_num(adj_m3_1, 3),
# Execute: " to ", fmt_num(adj_m3_2, 3), ", and ", justice_sig_n,
" to ", fmt_num(adj_m3_2, 3), ", and ", justice_sig_n,
# Execute: " justice indicators are significant at p < 0.05. ",
" justice indicators are significant at p < 0.05. ",
# Execute: "The pitch_diff estimate remains negative and similar in magnitude, indicating the relationship is not drive...
"The pitch_diff estimate remains negative and similar in magnitude, indicating the relationship is not driven only by cross-justice composition."
# Close function call arguments.
)
# Build Q12 narrative on adding term indicators and adjusted R-squared change.
# Assign computed result to q12_text.
q12_text <- paste0(
# Execute: "Adding term indicators further increases adjusted R2 from ", fmt_num(adj_m3_2, 3),
"Adding term indicators further increases adjusted R2 from ", fmt_num(adj_m3_2, 3),
# Execute: " to ", fmt_num(adj_m3_3, 3), ", with ", term_sig_n,
" to ", fmt_num(adj_m3_3, 3), ", with ", term_sig_n,
# Execute: " term indicators significant at p < 0.05. ",
" term indicators significant at p < 0.05. ",
# Execute: "This indicates nontrivial time-period variation in voting behavior and better overall fit once period-speci...
"This indicates nontrivial time-period variation in voting behavior and better overall fit once period-specific shocks are absorbed."
# Close function call arguments.
)
# Assign computed result to coef_period.
coef_period <- coef(m3_period_int)
# Assign computed result to slope_burger.
slope_burger <- unname(coef_period["pitch_diff"])
# Assign computed result to slope_rehnquist.
slope_rehnquist <- slope_burger + unname(coef_period["pitch_diff:court_periodRehnquist"])
# Assign computed result to slope_roberts.
slope_roberts <- slope_burger + unname(coef_period["pitch_diff:court_periodRoberts"])
# Build Q13 narrative from period-specific interaction slopes.
# Assign computed result to q13_text.
q13_text <- paste0(
# Execute: "In the pitch_diff * court_period interaction model, the negative slope is strongest in the Rehnquist period...
"In the pitch_diff * court_period interaction model, the negative slope is strongest in the Rehnquist period and also negative in the Roberts period: ",
# Execute: "Burger slope = ", fmt_num(slope_burger, 3),
"Burger slope = ", fmt_num(slope_burger, 3),
# Execute: ", Rehnquist slope = ", fmt_num(slope_rehnquist, 3),
", Rehnquist slope = ", fmt_num(slope_rehnquist, 3),
# Execute: ", Roberts slope = ", fmt_num(slope_roberts, 3), ". ",
", Roberts slope = ", fmt_num(slope_roberts, 3), ". ",
# Execute: "This supports a period-varying relationship where vocal-pitch effects are modest in Burger-era data and mor...
"This supports a period-varying relationship where vocal-pitch effects are modest in Burger-era data and more negative afterward."
# Close function call arguments.
)
# Assign computed result to adj_prog.
adj_prog <- sapply(
# Execute: list(m_prog1, m_prog2, m_prog3, m_prog4, m_prog5, m_prog6),
list(m_prog1, m_prog2, m_prog3, m_prog4, m_prog5, m_prog6),
# Execute: function(m) summary(m)$adj.r.squared
function(m) summary(m)$adj.r.squared
# Close function call arguments.
)
# Build Q14 narrative from progressive-model fit comparisons.
# Assign computed result to q14_text.
q14_text <- paste0(
# Execute: "Progressive models show small fit gains from Model 1 to 2, a clearer jump when sgpetac is added (Model 3), ...
"Progressive models show small fit gains from Model 1 to 2, a clearer jump when sgpetac is added (Model 3), and minor incremental changes from additional period and interaction terms. ",
# Execute: "Adjusted R2 values are: M1=", fmt_num(adj_prog[1], 3),
"Adjusted R2 values are: M1=", fmt_num(adj_prog[1], 3),
# Execute: ", M2=", fmt_num(adj_prog[2], 3),
", M2=", fmt_num(adj_prog[2], 3),
# Execute: ", M3=", fmt_num(adj_prog[3], 3),
", M3=", fmt_num(adj_prog[3], 3),
# Execute: ", M4=", fmt_num(adj_prog[4], 3),
", M4=", fmt_num(adj_prog[4], 3),
# Execute: ", M5=", fmt_num(adj_prog[5], 3),
", M5=", fmt_num(adj_prog[5], 3),
# Execute: ", M6=", fmt_num(adj_prog[6], 3), ". ",
", M6=", fmt_num(adj_prog[6], 3), ". ",
# Execute: "Substantively, SG amicus support is the strongest added predictor in this set, while interaction terms mode...
"Substantively, SG amicus support is the strongest added predictor in this set, while interaction terms modestly refine but do not radically change model fit."
# Close function call arguments.
)
# Q16/Q17
# Count how many diagnostic rules each observation violates.
# Assign computed result to outlier_df.
outlier_df <- outlier_df %>%
# Execute: dplyr::mutate(
dplyr::mutate(
# Execute: n_flags = as.integer(abs(studentized_resid) > thr_resid) +
n_flags = as.integer(abs(studentized_resid) > thr_resid) +
# Execute: as.integer(leverage > thr_lev) +
as.integer(leverage > thr_lev) +
# Execute: as.integer(cooks_d > thr_cook) +
as.integer(cooks_d > thr_cook) +
# Execute: as.integer(abs(dffits) > thr_dffits)
as.integer(abs(dffits) > thr_dffits)
# Close function call arguments.
)
# Attach case identifiers to outlier diagnostics for interpretability in Q16.
# Assign computed result to outlier_cases.
outlier_cases <- cbind(
# Execute: outlier_df,
outlier_df,
# Execute: analysis_data_used[, c("docketId", "docket", "justiceName", "term")]
analysis_data_used[, c("docketId", "docket", "justiceName", "term")]
# Close function call arguments.
)
# Rank outliers by number of threshold violations and influence magnitude.
# Assign computed result to top_outliers.
top_outliers <- outlier_cases %>%
# Execute: dplyr::filter(is_outlier) %>%
dplyr::filter(is_outlier) %>%
# Execute: dplyr::arrange(desc(n_flags), desc(abs_dffits)) %>%
dplyr::arrange(desc(n_flags), desc(abs_dffits)) %>%
# Execute: dplyr::slice(1:5)
dplyr::slice(1:5)
# Convert top outlier rows into concise text snippet.
# Assign computed result to q16_top.
q16_top <- paste(
# Execute: paste0(
paste0(
# Execute: "obs ", top_outliers$obs_id, " (", top_outliers$docketId, ", ",
"obs ", top_outliers$obs_id, " (", top_outliers$docketId, ", ",
# Execute: top_outliers$justiceName, ", term ", top_outliers$term,
top_outliers$justiceName, ", term ", top_outliers$term,
# Execute: ", flags=", top_outliers$n_flags, ")"
", flags=", top_outliers$n_flags, ")"
# Close function call arguments.
),
# Execute: collapse = "; "
collapse = "; "
# Close function call arguments.
)
# Build Q16 narrative summarizing outlier counts and notable cases.
# Assign computed result to q16_text.
q16_text <- paste0(
# Execute: "Using assignment thresholds, ", sum(outlier_df$is_outlier),
"Using assignment thresholds, ", sum(outlier_df$is_outlier),
# Execute: " observations are flagged by at least one diagnostic and ",
" observations are flagged by at least one diagnostic and ",
# Execute: sum(outlier_df$is_egregious), " are egregious (all four criteria). ",
sum(outlier_df$is_egregious), " are egregious (all four criteria). ",
# Execute: "Top flagged observations include: ", q16_top, ". ",
"Top flagged observations include: ", q16_top, ". ",
# Execute: "Most high-impact cases are flagged by leverage, Cook's D, and DFFITS simultaneously, while none exceed the ...
"Most high-impact cases are flagged by leverage, Cook's D, and DFFITS simultaneously, while none exceed the |studentized residual| > 2 rule."
# Close function call arguments.
)
# Compare coefficients and standard errors between full and clean models.
# Assign computed result to coef_full.
coef_full <- coef(summary(model_full))
# Assign computed result to coef_clean.
coef_clean <- coef(summary(model_clean))
# Assign computed result to common_terms.
common_terms <- intersect(rownames(coef_full), rownames(coef_clean))
# Assign computed result to comp.
comp <- data.frame(
# Execute: term = common_terms,
term = common_terms,
# Execute: b_full = coef_full[common_terms, "Estimate"],
b_full = coef_full[common_terms, "Estimate"],
# Execute: se_full = coef_full[common_terms, "Std. Error"],
se_full = coef_full[common_terms, "Std. Error"],
# Execute: b_clean = coef_clean[common_terms, "Estimate"],
b_clean = coef_clean[common_terms, "Estimate"],
# Execute: se_clean = coef_clean[common_terms, "Std. Error"]
se_clean = coef_clean[common_terms, "Std. Error"]
# Close function call arguments.
)
# Helper for standardized "full -> clean" coefficient text formatting.
# Assign computed result to get_comp.
get_comp <- function(term_name) {
# Assign computed result to row.
row <- comp[comp$term == term_name, , drop = FALSE]
# Execute: paste0(
paste0(
# Execute: term_name, ": b ", fmt_num(row$b_full, 3), " -> ", fmt_num(row$b_clean, 3),
term_name, ": b ", fmt_num(row$b_full, 3), " -> ", fmt_num(row$b_clean, 3),
# Execute: "; SE ", fmt_num(row$se_full, 3), " -> ", fmt_num(row$se_clean, 3)
"; SE ", fmt_num(row$se_full, 3), " -> ", fmt_num(row$se_clean, 3)
# Close function call arguments.
)
# Close current code block.
}
# Build Q17 narrative from side-by-side coefficient/SE changes.
# Assign computed result to q17_text.
q17_text <- paste(
# Execute: "Removing flagged outliers changes some coefficients but preserves the core qualitative finding that pitch_d...
"Removing flagged outliers changes some coefficients but preserves the core qualitative finding that pitch_diff remains negative and SG amicus support remains positive/significant.",
# Execute: get_comp("pitch_diff"),
get_comp("pitch_diff"),
# Execute: get_comp("sgpetac"),
get_comp("sgpetac"),
# Execute: get_comp("pitch_diff:pr_petitioner_pos"),
get_comp("pitch_diff:pr_petitioner_pos"),
# Execute: "The clean-sample model has similar directional conclusions but somewhat different magnitudes and uncertaint...
"The clean-sample model has similar directional conclusions but somewhat different magnitudes and uncertainty, so results look broadly robust with moderate sensitivity for interaction terms."
# Close function call arguments.
)
# Assemble all section draft answers into one output vector.
# Assign computed result to answers_q5_q17.
answers_q5_q17 <- c(
# Execute: "Section 3.2-3.4 Draft Answers (Q5-Q17)",
"Section 3.2-3.4 Draft Answers (Q5-Q17)",
# Execute: "",
"",
# Execute: paste0("Q5: ", q5_text),
paste0("Q5: ", q5_text),
# Execute: "",
"",
# Execute: paste0("Q6: ", q6_text),
paste0("Q6: ", q6_text),
# Execute: "",
"",
# Execute: paste0("Q7: ", q7_text),
paste0("Q7: ", q7_text),
# Execute: "",
"",
# Execute: paste0("Q8: ", q8_text),
paste0("Q8: ", q8_text),
# Execute: "",
"",
# Execute: paste0("Q9: ", q9_text),
paste0("Q9: ", q9_text),
# Execute: "",
"",
# Execute: paste0("Q10: ", q10_text),
paste0("Q10: ", q10_text),
# Execute: "",
"",
# Execute: paste0("Q11: ", q11_text),
paste0("Q11: ", q11_text),
# Execute: "",
"",
# Execute: paste0("Q12: ", q12_text),
paste0("Q12: ", q12_text),
# Execute: "",
"",
# Execute: paste0("Q13: ", q13_text),
paste0("Q13: ", q13_text),
# Execute: "",
"",
# Execute: paste0("Q14: ", q14_text),
paste0("Q14: ", q14_text),
# Execute: "",
"",
# Execute: "Q15: IGNORE/DO NOT ANSWER.",
"Q15: IGNORE/DO NOT ANSWER.",
# Execute: "",
"",
# Execute: paste0("Q16: ", q16_text),
paste0("Q16: ", q16_text),
# Execute: "",
"",
# Execute: paste0("Q17: ", q17_text)
paste0("Q17: ", q17_text)
# Close function call arguments.
)
# Save Q5-Q17 draft answers for use in the final PDF write-up.
# Write text output to file.
writeLines(answers_q5_q17, "HW3_DraftAnswers_Q5_Q17.txt")
